---
title: イベント
---

Inertia は、ライブラリのさまざまなライフサイクルイベントに「フック」できるイベントシステムを提供します。

## リスナーの登録

イベントリスナーを登録するには、`router.on()` メソッドを使用します。

<CodeGroup>

```js Vue icon="vuejs"
import { router } from '@inertiajs/vue3'

router.on('start', (event) => {
    console.log(`Starting a visit to ${event.detail.visit.url}`)
})
```

```jsx React icon="react"
import { router } from '@inertiajs/react'

router.on('start', (event) => {
    console.log(`Starting a visit to ${event.detail.visit.url}`)
})
```

```js Svelte icon="s"
import { router } from '@inertiajs/svelte'

router.on('start', (event) => {
    console.log(`Starting a visit to ${event.detail.visit.url}`)
})
```

</CodeGroup>

内部的には Inertia はネイティブのブラウザーイベントを使用しているため、すでに慣れ親しんでいる一般的なイベントメソッドを使って Inertia のイベントとやり取りすることもできます。ただし、イベント名の先頭に `inertia:` を付ける必要があります。

<CodeGroup>

```js Vue icon="vuejs"
import { router } from '@inertiajs/vue3'

document.addEventListener('inertia:start', (event) => {
    console.log(`Starting a visit to ${event.detail.visit.url}`)
})
```

```jsx React icon="react"
import { router } from '@inertiajs/react'

document.addEventListener('inertia:start', (event) => {
    console.log(`Starting a visit to ${event.detail.visit.url}`)
})
```

```js Svelte icon="s"
import { router } from '@inertiajs/svelte'

document.addEventListener('inertia:start', (event) => {
    console.log(`Starting a visit to ${event.detail.visit.url}`)
})
```

</CodeGroup>

## リスナーの削除

イベントリスナーを登録すると、Inertia は自動的に、そのリスナーを削除するために呼び出せるコールバックを返します。

<CodeGroup>

```js Vue icon="vuejs"
import { router } from '@inertiajs/vue3'

let removeStartEventListener = router.on('start', (event) => {
    console.log(`Starting a visit to ${event.detail.visit.url}`)
})

// リスナーを削除...
removeStartEventListener()
```

```jsx React icon="react"
import { router } from '@inertiajs/react'

let removeStartEventListener = router.on('start', (event) => {
    console.log(`Starting a visit to ${event.detail.visit.url}`)
})

// リスナーを削除...
removeStartEventListener()
```

```js Svelte icon="s"
import { router } from '@inertiajs/svelte'

let removeStartEventListener = router.on('start', (event) => {
    console.log(`Starting a visit to ${event.detail.visit.url}`)
})

// リスナーを削除...
removeStartEventListener()
```

</CodeGroup>

フックと組み合わせることで、コンポーネントがアンマウントされた際に自動的にイベントリスナーを削除できます。

<CodeGroup>

```vue Vue icon="vuejs"
import { router } from '@inertiajs/vue3'
import { onUnmounted } from 'vue'

onUnmounted(
    router.on('start', (event) => {
        console.log(`Starting a visit to ${event.detail.visit.url}`)
    })
)
```

```jsx React icon="react"
import { useEffect } from 'react'
import { router } from '@inertiajs/react'

useEffect(() => {
    return router.on('start', (event) => {
        console.log(`Starting a visit to ${event.detail.visit.url}`)
    })
}, [])
```

```js Svelte 4 icon="s"
import { router } from '@inertiajs/svelte'
import { onMount } from 'svelte'

onMount(() => {
    return router.on('start', (event) => {
        console.log(`Starting a visit to ${event.detail.visit.url}`)
    })
})
```

```js Svelte 5 icon="s"
import { router } from '@inertiajs/svelte'

$effect(() => {
    return router.on('start', (event) => {
        console.log(`Starting a visit to ${event.detail.visit.url}`)
    })
})
```

</CodeGroup>

あるいは、ネイティブのブラウザーイベントを使用している場合は、`removeEventListener()` を使ってイベントリスナーを削除できます。

<CodeGroup>

```js Vue icon="vuejs"
import { router } from '@inertiajs/vue3'

let startEventListener = (event) => {
    console.log(`Starting a visit to ${event.detail.visit.url}`)
}

document.addEventListener('inertia:start', startEventListener)

// リスナーを削除...
document.removeEventListener('inertia:start', startEventListener)
```

```jsx React icon="react"
import { router } from '@inertiajs/react'

let startEventListener = (event) => {
    console.log(`Starting a visit to ${event.detail.visit.url}`)
}

document.addEventListener('inertia:start', startEventListener)

// リスナーを削除...
document.removeEventListener('inertia:start', startEventListener)
```

```js Svelte icon="s"
import { router } from '@inertiajs/svelte'

let startEventListener = (event) => {
    console.log(`Starting a visit to ${event.detail.visit.url}`)
}

document.addEventListener('inertia:start', startEventListener)

// リスナーを削除...
document.removeEventListener('inertia:start', startEventListener)
```

</CodeGroup>

## イベントのキャンセル

`before`、`exception`、`invalid` などの一部のイベントはキャンセルをサポートしており、Inertia のデフォルト動作を防ぐことができます。ネイティブイベントと同様に、いずれか 1 つのイベントリスナーが `event.preventDefault()` を呼び出すと、そのイベントはキャンセルされます。

<CodeGroup>

```js Vue icon="vuejs"
import { router } from '@inertiajs/vue3'

router.on('before', (event) => {
    if (!confirm('Are you sure you want to navigate away?')) {
        event.preventDefault()
    }
})
```

```jsx React icon="react"
import { router } from '@inertiajs/react'

router.on('before', (event) => {
    if (!confirm('Are you sure you want to navigate away?')) {
        event.preventDefault()
    }
})
```

```js Svelte icon="s"
import { router } from '@inertiajs/svelte'

router.on('before', (event) => {
    if (!confirm('Are you sure you want to navigate away?')) {
        event.preventDefault()
    }
})
```

</CodeGroup>

利便性のため、`router.on()` を使ってイベントリスナーを登録している場合は、リスナーから `false` を返すことでイベントをキャンセルできます。

<CodeGroup>

```js Vue icon="vuejs"
import { router } from '@inertiajs/vue3'

router.on('before', (event) => {
    return confirm('Are you sure you want to navigate away?')
})
```

```jsx React icon="react"
import { router } from '@inertiajs/react'

router.on('before', (event) => {
    return confirm('Are you sure you want to navigate away?')
})
```

```js Svelte icon="s"
import { router } from '@inertiajs/svelte'

router.on('before', (event) => {
    return confirm('Are you sure you want to navigate away?')
})
```

</CodeGroup>

なお、ブラウザーはネイティブの `popstate` イベントのキャンセルを許可していないため、Inertia.js の使用中に履歴の前後移動を防ぐことはできません。

## Before

`before` イベントは、サーバーへのリクエストが送信される直前に発火します。これは、訪問をインターセプトするのに役立ちます。

<CodeGroup>

```js Vue icon="vuejs"
import { router } from '@inertiajs/vue3'

router.on('before', (event) => {
    console.log(`About to make a visit to ${event.detail.visit.url}`)
})
```

```jsx React icon="react"
import { router } from '@inertiajs/react'

router.on('before', (event) => {
    console.log(`About to make a visit to ${event.detail.visit.url}`)
})
```

```js Svelte icon="s"
import { router } from '@inertiajs/svelte'

router.on('before', (event) => {
    console.log(`About to make a visit to ${event.detail.visit.url}`)
})
```

</CodeGroup>

このイベントの主な目的は、訪問が実行されるのを防ぐことです。

<CodeGroup>

```js Vue icon="vuejs"
import { router } from '@inertiajs/vue3'

router.on('before', (event) => {
    return confirm('Are you sure you want to navigate away?')
})
```

```jsx React icon="react"
import { router } from '@inertiajs/react'

router.on('before', (event) => {
    return confirm('Are you sure you want to navigate away?')
})
```

```js Svelte icon="s"
import { router } from '@inertiajs/svelte'

router.on('before', (event) => {
    return confirm('Are you sure you want to navigate away?')
})
```

</CodeGroup>

## Start

`start` イベントは、サーバーへのリクエストが開始されたときに発火します。これは、ローディングインジケーターを表示するのに便利です。

<CodeGroup>

```js Vue icon="vuejs"
import { router } from '@inertiajs/vue3'

router.on('start', (event) => {
    console.log(`Starting a visit to ${event.detail.visit.url}`)
})
```

```jsx React icon="react"
import { router } from '@inertiajs/react'

router.on('start', (event) => {
    console.log(`Starting a visit to ${event.detail.visit.url}`)
})
```

```js Svelte icon="s"
import { router } from '@inertiajs/svelte'

router.on('start', (event) => {
    console.log(`Starting a visit to ${event.detail.visit.url}`)
})
```

</CodeGroup>

`start` イベントはキャンセルできません。

## Progress

`progress` イベントは、ファイルアップロード中に進捗が増加するたびに発火します。

<CodeGroup>

```js Vue icon="vuejs"
import { router } from '@inertiajs/vue3'

router.on('progress', (event) => {
    this.form.progress = event.detail.progress.percentage
})
```

```jsx React icon="react"
import { router } from '@inertiajs/react'

router.on('progress', (event) => {
    this.form.progress = event.detail.progress.percentage
})
```

```js Svelte icon="s"
import { router } from '@inertiajs/svelte'

router.on('progress', (event) => {
    this.form.progress = event.detail.progress.percentage
})
```

</CodeGroup>

`progress` イベントはキャンセルできません。

## Success

`success` イベントは、バリデーションエラーが存在しない場合に、ページ訪問が成功すると発火します。ただし、履歴による訪問は含まれません。

<CodeGroup>

```js Vue icon="vuejs"
import { router } from '@inertiajs/vue3'

router.on('success', (event) => {
    console.log(`Successfully made a visit to ${event.detail.page.url}`)
})
```

```jsx React icon="react"
import { router } from '@inertiajs/react'

router.on('success', (event) => {
    console.log(`Successfully made a visit to ${event.detail.page.url}`)
})
```

```js Svelte icon="s"
import { router } from '@inertiajs/svelte'

router.on('success', (event) => {
    console.log(`Successfully made a visit to ${event.detail.page.url}`)
})
```

</CodeGroup>

`success` イベントはキャンセルできません。

## Flash

<Badge>v2.3.3+</Badge>

`flash` イベントは、サーバーから [フラッシュデータ](/v2/data-props/flash-data) を受信したときに発火します。これは、トースト通知を表示したり、一時的なデータを中央集約的な場所で処理したりするのに便利です。

<CodeGroup>

```js Vue icon="vuejs"
import { router } from '@inertiajs/vue3'

router.on('flash', (event) => {
    if (event.detail.flash.toast) {
        showToast(event.detail.flash.toast)
    }
})
```

```jsx React icon="react"
import { router } from '@inertiajs/react'

router.on('flash', (event) => {
    if (event.detail.flash.toast) {
        showToast(event.detail.flash.toast)
    }
})
```

```js Svelte icon="s"
import { router } from '@inertiajs/svelte'

router.on('flash', (event) => {
    if (event.detail.flash.toast) {
        showToast(event.detail.flash.toast)
    }
})
```

</CodeGroup>

`flash` イベントはキャンセルできません。[パーシャルリロード](/v2/data-props/partial-reloads) では、フラッシュデータが変更された場合にのみこのイベントが発火します。

## Error

`error` イベントは、「成功した」ページ訪問においてバリデーションエラーが存在する場合に発火します。

<CodeGroup>

```js Vue icon="vuejs"
import { router } from '@inertiajs/vue3'

router.on('error', (errors) => {
    console.log(errors)
})
```

```jsx React icon="react"
import { router } from '@inertiajs/react'

router.on('error', (errors) => {
    console.log(errors)
})
```

```js Svelte icon="s"
import { router } from '@inertiajs/svelte'

router.on('error', (errors) => {
    console.log(errors)
})
```

</CodeGroup>

`error` イベントはキャンセルできません。

## Invalid

`invalid` イベントは、HTML や通常の JSON レスポンスなど、非 Inertia レスポンスがサーバーから返されたときに発火します。有効な Inertia レスポンスとは、`X-Inertia` ヘッダーが `true` に設定され、[ページオブジェクト](/v2/core-concepts/the-protocol#the-page-object) を含む `json` ペイロードを持つレスポンスのことです。

このイベントは、`200`、`400`、`500` を含むすべてのレスポンスタイプで発火します。

<CodeGroup>

```js Vue icon="vuejs"
import { router } from '@inertiajs/vue3'

router.on('invalid', (event) => {
    console.log(`An invalid Inertia response was received.`)
    console.log(event.detail.response)
})
```

```jsx React icon="react"
import { router } from '@inertiajs/react'

router.on('invalid', (event) => {
    console.log(`An invalid Inertia response was received.`)
    console.log(event.detail.response)
})
```

```js Svelte icon="s"
import { router } from '@inertiajs/svelte'

router.on('invalid', (event) => {
    console.log(`An invalid Inertia response was received.`)
    console.log(event.detail.response)
})
```

</CodeGroup>

`invalid` イベントをキャンセルすることで、Inertia が非 Inertia レスポンス用のモーダルを表示するのを防ぐことができます。

<CodeGroup>

```js Vue icon="vuejs"
import { router } from '@inertiajs/vue3'

router.on('invalid', (event) => {
    event.preventDefault()

    // 無効なレスポンスを自分で処理する...
})
```

```jsx React icon="react"
import { router } from '@inertiajs/react'

router.on('invalid', (event) => {
    event.preventDefault()

    // 無効なレスポンスを自分で処理する...
})
```

```js Svelte icon="s"
import { router } from '@inertiajs/svelte'

router.on('invalid', (event) => {
    event.preventDefault()

    // 無効なレスポンスを自分で処理する...
})
```

</CodeGroup>

## Exception

`exception` イベントは、ネットワーク中断などの予期しない XHR エラーが発生した場合に発火します。また、ページコンポーネントの解決時に生成されたエラーに対しても発火します。

<CodeGroup>

```js Vue icon="vuejs"
import { router } from '@inertiajs/vue3'

router.on('exception', (event) => {
    console.log(`An unexpected error occurred during an Inertia visit.`)
    console.log(event.detail.error)
})
```

```jsx React icon="react"
import { router } from '@inertiajs/react'

router.on('exception', (event) => {
    console.log(`An unexpected error occurred during an Inertia visit.`)
    console.log(event.detail.error)
})
```

```js Svelte icon="s"
import { router } from '@inertiajs/svelte'

router.on('exception', (event) => {
    console.log(`An unexpected error occurred during an Inertia visit.`)
    console.log(event.detail.error)
})
```

</CodeGroup>

`exception` イベントをキャンセルすることで、エラーがスローされるのを防ぐことができます。

<CodeGroup>

```js Vue icon="vuejs"
import { router } from '@inertiajs/vue3'

router.on('exception', (event) => {
    event.preventDefault()
    // エラーを自分で処理する
})
```

```jsx React icon="react"
import { router } from '@inertiajs/react'

router.on('exception', (event) => {
    event.preventDefault()
    // エラーを自分で処理する
})
```

```js Svelte icon="s"
import { router } from '@inertiajs/svelte'

router.on('exception', (event) => {
    event.preventDefault()
    // エラーを自分で処理する
})
```

</CodeGroup>

このイベントは、`400` や `500` レベルのレスポンスを受け取った XHR リクエストや、非 Inertia レスポンスに対しては発火しません。これらの状況は Inertia によって別の方法で処理されます。詳細については、[エラーハンドリングのドキュメント](/v2/advanced/error-handling) を参照してください。

## Finish

`finish` イベントは、「成功」「失敗」を問わず、XHR リクエストが完了した後に発火します。これは、ローディングインジケーターを非表示にするのに便利です。

<CodeGroup>

```js Vue icon="vuejs"
import { router } from '@inertiajs/vue3'

router.on('finish', (event) => {
    NProgress.done()
})
```

```jsx React icon="react"
import { router } from '@inertiajs/react'

router.on('finish', (event) => {
    NProgress.done()
})
```

```js Svelte icon="s"
import { router } from '@inertiajs/svelte'

router.on('finish', (event) => {
    NProgress.done()
})
```

</CodeGroup>

`finish` イベントはキャンセルできません。

## Navigate

`navigate` イベントは、ページ訪問が成功したとき、および履歴を通じてナビゲーションしたときに発火します。

<CodeGroup>

```js Vue icon="vuejs"
import { router } from '@inertiajs/vue3'

router.on('navigate', (event) => {
    console.log(`Navigated to ${event.detail.page.url}`)
})
```

```jsx React icon="react"
import { router } from '@inertiajs/react'

router.on('navigate', (event) => {
    console.log(`Navigated to ${event.detail.page.url}`)
})
```

```js Svelte icon="s"
import { router } from '@inertiajs/svelte'

router.on('navigate', (event) => {
    console.log(`Navigated to ${event.detail.page.url}`)
})
```

</CodeGroup>

`navigate` イベントはキャンセルできません。

## Prefetching

`prefetching` イベントは、ルーターがページのプリフェッチを開始したときに発火します。

<CodeGroup>

```js Vue icon="vuejs"
import { router } from '@inertiajs/vue3'

router.on('prefetching', (event) => {
    console.log(`Prefetching ${event.detail.page.url}`)
})
```

```jsx React icon="react"
import { router } from '@inertiajs/react'

router.on('prefetching', (event) => {
    console.log(`Prefetching ${event.detail.page.url}`)
})
```

```js Svelte icon="s"
import { router } from '@inertiajs/svelte'

router.on('prefetching', (event) => {
    console.log(`Prefetching ${event.detail.page.url}`)
})
```

</CodeGroup>

`prefetching` イベントはキャンセルできません。

## Prefetched

`prefetched` イベントは、ルーターがページのプリフェッチに成功したときに発火します。

<CodeGroup>

```js Vue icon="vuejs"
import { router } from '@inertiajs/vue3'

router.on('prefetched', (event) => {
    console.log(`Prefetched ${event.detail.page.url}`)
})
```

```jsx React icon="react"
import { router } from '@inertiajs/react'

router.on('prefetched', (event) => {
    console.log(`Prefetched ${event.detail.page.url}`)
})
```

```js Svelte icon="s"
import { router } from '@inertiajs/svelte'

router.on('prefetched', (event) => {
    console.log(`Prefetched ${event.detail.page.url}`)
})
```

</CodeGroup>

`prefetched` イベントはキャンセルできません。

## イベントコールバック

このページ全体で説明しているグローバルイベントに加えて、Inertia では、手動で Inertia の訪問を行う際に発火するいくつかの [イベントコールバック](/v2/the-basics/manual-visits#event-callbacks) も提供されています。
