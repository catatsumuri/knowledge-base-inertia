---
title: ポーリング
---

## ポールヘルパー

現在のページで新しい情報を取得するためにサーバーをポーリングすることは一般的です。そのため Inertia には、ボイラープレートコードの量を減らすために設計されたポールヘルパーが用意されています。さらに、ポールヘルパーはページがアンマウントされると自動的にポーリングを停止します。

必須の引数は、ミリ秒単位のポーリング間隔のみです。

<CodeGroup>

```js Vue icon="vuejs"
import { usePoll } from '@inertiajs/vue3'

usePoll(2000)
```

```jsx React icon="react"
import { usePoll } from '@inertiajs/react'

usePoll(2000)
```

```js Svelte icon="s"
import { usePoll } from '@inertiajs/svelte'

usePoll(2000)
```

</CodeGroup>

ポールヘルパーに追加のリクエストオプションを渡したい場合は、第 2 引数として `router.reload` のオプションをそのまま渡すことができます。

<CodeGroup>

```js Vue icon="vuejs"
import { usePoll } from '@inertiajs/vue3'

usePoll(2000, {
    onStart() {
            console.log('Polling request started')
    },
    onFinish() {
            console.log('Polling request finished')
    }
})
```

```jsx React icon="react"
import { usePoll } from '@inertiajs/react'

usePoll(2000, {
    onStart() {
            console.log('Polling request started')
    },
    onFinish() {
            console.log('Polling request finished')
    }
})
```

```js Svelte icon="s"
import { usePoll } from '@inertiajs/svelte'

usePoll(2000, {
    onStart() {
            console.log('Polling request started')
    },
    onFinish() {
            console.log('Polling request finished')
    }
})
```

</CodeGroup>

ポーリングの挙動をより細かく制御したい場合、ポールヘルパーにはポーリングを手動で開始・停止できる `stop` および `start` メソッドが用意されています。コンポーネントのマウント時に自動的にポーリングを開始させたくない場合は、`autoStart: false` オプションをポールヘルパーに渡してください。

<CodeGroup>

```vue Vue icon="vuejs"
<script setup>
import { usePoll } from '@inertiajs/vue3'

const { start, stop } = usePoll(2000, {}, {
    autoStart: false,
})
</script>

<template>
    <button @click="start">Start polling</button>
    <button @click="stop">Stop polling</button>
</template>
```

```jsx React icon="react"
import { usePoll } from '@inertiajs/react'

export default () => {
    const { start, stop } = usePoll(2000, {}, {
            autoStart: false,
    })

    return (
            <div>
                    <button onClick={start}>Start polling</button>
                    <button onClick={stop}>Stop polling</button>
            </div>
    )
}
```

```js Svelte icon="s"
import { usePoll } from '@inertiajs/svelte'

const { start, stop } = usePoll(2000, {}, {
    autoStart: false,
})
```

</CodeGroup>

## スロットリング

デフォルトでは、ブラウザタブがバックグラウンドにある場合、ポールヘルパーはリクエストを 90% スロットリングします。この挙動を無効にしたい場合は、`keepAlive` オプションをポールヘルパーに渡してください。

<CodeGroup>

```js Vue icon="vuejs"
import { usePoll } from '@inertiajs/vue3'

usePoll(2000, {}, {
    keepAlive: true,
})
```

```jsx React icon="react"
import { usePoll } from '@inertiajs/react'

usePoll(2000, {}, {
    keepAlive: true,
})
```

```js Svelte icon="s"
import { usePoll } from '@inertiajs/svelte'

usePoll(2000, {}, {
    keepAlive: true,
})
```

</CodeGroup>
