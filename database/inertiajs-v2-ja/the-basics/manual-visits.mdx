---
title: 手動訪問
---

[リンクの作成](/v2/the-basics/links)に加えて、JavaScript からプログラム的に Inertia の訪問／リクエストを手動で行うことも可能です。これは `router.visit()` メソッドを使用して実現します。

<CodeGroup>

```js Vue icon="vuejs"
import { router } from '@inertiajs/vue3'

router.visit(url, {
    method: 'get',
    data: {},
    replace: false,
    preserveState: false,
    preserveScroll: false,
    only: [],
    except: [],
    headers: {},
    errorBag: null,
    forceFormData: false,
    queryStringArrayFormat: 'brackets',
    async: false,
    showProgress: true,
    fresh: false,
    reset: [],
    preserveUrl: false,
    prefetch: false,
    viewTransition: false,
    onCancelToken: cancelToken => {},
    onCancel: () => {},
    onBefore: visit => {},
    onStart: visit => {},
    onProgress: progress => {},
    onSuccess: page => {},
    onError: errors => {},
    onFinish: visit => {},
    onPrefetching: () => {},
    onPrefetched: () => {},
})
```

```js React icon="react"
import { router } from '@inertiajs/react'

router.visit(url, {
    method: 'get',
    data: {},
    replace: false,
    preserveState: false,
    preserveScroll: false,
    only: [],
    except: [],
    headers: {},
    errorBag: null,
    forceFormData: false,
    queryStringArrayFormat: 'brackets',
    async: false,
    showProgress: true,
    fresh: false,
    reset: [],
    preserveUrl: false,
    prefetch: false,
    viewTransition: false,
    onCancelToken: cancelToken => {},
    onCancel: () => {},
    onBefore: visit => {},
    onStart: visit => {},
    onProgress: progress => {},
    onSuccess: page => {},
    onError: errors => {},
    onFinish: visit => {},
    onPrefetching: () => {},
    onPrefetched: () => {},
})
```

```js Svelte icon="s"
import { router } from '@inertiajs/svelte'

router.visit(url, {
    method: 'get',
    data: {},
    replace: false,
    preserveState: false,
    preserveScroll: false,
    only: [],
    except: [],
    headers: {},
    errorBag: null,
    forceFormData: false,
    queryStringArrayFormat: 'brackets',
    async: false,
    showProgress: true,
    fresh: false,
    reset: [],
    preserveUrl: false,
    prefetch: false,
    viewTransition: false,
    onCancelToken: cancelToken => {},
    onCancel: () => {},
    onBefore: visit => {},
    onStart: visit => {},
    onProgress: progress => {},
    onSuccess: page => {},
    onError: errors => {},
    onFinish: visit => {},
    onPrefetching: () => {},
    onPrefetched: () => {},
})
```

</CodeGroup>

ただし、一般的には Inertia が提供するショートカットリクエストメソッドのいずれかを使用する方が便利です。これらのメソッドは、`router.visit()` と同じオプションをすべて共有します。

<CodeGroup>

```js Vue icon="vuejs"
import { router } from '@inertiajs/vue3'

router.get(url, data, options)
router.post(url, data, options)
router.put(url, data, options)
router.patch(url, data, options)
router.delete(url, options)
router.reload(options) // 現在の URL を使用
```

```js React icon="react"
import { router } from '@inertiajs/react'

router.get(url, data, options)
router.post(url, data, options)
router.put(url, data, options)
router.patch(url, data, options)
router.delete(url, options)
router.reload(options) // 現在の URL を使用
```

```js Svelte icon="s"
import { router } from '@inertiajs/svelte'

router.get(url, data, options)
router.post(url, data, options)
router.put(url, data, options)
router.patch(url, data, options)
router.delete(url, options)
router.reload(options) // 現在の URL を使用
```

</CodeGroup>

`reload()` メソッドは、`preserveState` と `preserveScroll` の両方を自動的に `true` に設定して現在のページを訪問する、便利なショートハンドメソッドです。現在のページのデータを単に再読み込みしたい場合に最適です。

## メソッド

手動で訪問を行う際には、`method` オプションを使用してリクエストの HTTP メソッドを `get`、`post`、`put`、`patch`、`delete` に設定できます。デフォルトのメソッドは `get` です。

<CodeGroup>

```js Vue icon="vuejs"
import { router } from '@inertiajs/vue3'

router.visit(url, { method: 'post' })
```

```js React icon="react"
import { router } from '@inertiajs/react'

router.visit(url, { method: 'post' })
```

```js Svelte icon="s"
import { router } from '@inertiajs/svelte'

router.visit(url, { method: 'post' })
```

</CodeGroup>

Laravel では、`put` や `patch` によるファイルアップロードはサポートされていません。代わりに、`post` を使用し、`_method` フィールドに `put` または `patch` を設定してリクエストを行ってください。これは [フォームメソッドスプーフィング](https://laravel.com/docs/routing#form-method-spoofing) と呼ばれます。

## Wayfinder

<Badge>v2.1.2+</Badge>

[Wayfinder](https://github.com/laravel/wayfinder) を使用している場合、生成されたオブジェクトをそのまま任意の router メソッドに渡すことができます。router は Wayfinder オブジェクトから HTTP メソッドと URL を自動的に推測します。

<CodeGroup>

```js Vue icon="vuejs"
import { router } from '@inertiajs/vue3'
import { show } from 'App/Http/Controllers/UserController'

router.visit(show(1))
router.post(store())
router.delete(destroy(1))
```

```js React icon="react"
import { router } from '@inertiajs/react'
import { show } from 'App/Http/Controllers/UserController'

router.visit(show(1))
router.post(store())
router.delete(destroy(1))
```

```js Svelte icon="s"
import { router } from '@inertiajs/svelte'
import { show } from 'App/Http/Controllers/UserController'

router.visit(show(1))
router.post(store())
router.delete(destroy(1))
```

</CodeGroup>

Wayfinder オブジェクトを渡しつつ `method` オプションも指定した場合は、`method` オプションが優先されます。

<CodeGroup>

```js Vue icon="vuejs"
import { router } from '@inertiajs/vue3'
import { update } from 'App/Http/Controllers/UserController'

router.visit(update(1), { method: 'patch' })
```

```js React icon="react"
import { router } from '@inertiajs/react'
import { update } from 'App/Http/Controllers/UserController'

router.visit(update(1), { method: 'patch' })
```

```js Svelte icon="s"
import { router } from '@inertiajs/svelte'
import { update } from 'App/Http/Controllers/UserController'

router.visit(update(1), { method: 'patch' })
```

</CodeGroup>

## データ

`data` オプションを使用して、リクエストにデータを追加できます。

<CodeGroup>

```js Vue icon="vuejs"
import { router } from '@inertiajs/vue3'

router.visit('/users', {
    method: 'post',
    data: {
        name: 'John Doe',
        email: 'john.doe@example.com',
    },
})
```

```js React icon="react"
import { router } from '@inertiajs/react'

router.visit('/users', {
    method: 'post',
    data: {
        name: 'John Doe',
        email: 'john.doe@example.com',
    },
})
```

```js Svelte icon="s"
import { router } from '@inertiajs/svelte'

router.visit('/users', {
    method: 'post',
    data: {
        name: 'John Doe',
        email: 'john.doe@example.com',
    },
})
```

</CodeGroup>

利便性のため、`get()`、`post()`、`put()`、`patch()` メソッドは、いずれも第 2 引数として `data` を受け取ります。

<CodeGroup>

```js Vue icon="vuejs"
import { router } from '@inertiajs/vue3'

router.post('/users', {
    name: 'John Doe',
    email: 'john.doe@example.com',
})
```

```js React icon="react"
import { router } from '@inertiajs/react'

router.post('/users', {
    name: 'John Doe',
    email: 'john.doe@example.com',
})
```

```js Svelte icon="s"
import { router } from '@inertiajs/svelte'

router.post('/users', {
    name: 'John Doe',
    email: 'john.doe@example.com',
})
```

</CodeGroup>

## カスタムヘッダー

`headers` オプションを使用すると、リクエストにカスタムヘッダーを追加できます。

<CodeGroup>

```js Vue icon="vuejs"
import { router } from '@inertiajs/vue3'

router.post('/users', data, {
    headers: {
        'Custom-Header': 'value',
    },
})
```

```js React icon="react"
import { router } from '@inertiajs/react'

router.post('/users', data, {
    headers: {
        'Custom-Header': 'value',
    },
})
```

```js Svelte icon="s"
import { router } from '@inertiajs/svelte'

router.post('/users', data, {
    headers: {
        'Custom-Header': 'value',
    },
})
```

</CodeGroup>

Inertia が内部で状態をサーバーに伝えるために使用するヘッダーは優先されるため、上書きすることはできません。

## グローバル訪問オプション

[Inertia アプリの初期化](/v2/installation/client-side-setup#configuring-defaults)時に `visitOptions` コールバックを設定することで、すべてのリクエストに対して訪問オプションをグローバルに変更できます。このコールバックは対象 URL と現在の訪問オプションを受け取り、上書きしたいオプションを含むオブジェクトを返す必要があります。

<CodeGroup>

```js Vue icon="vuejs"
import { createApp, h } from 'vue'
import { createInertiaApp } from '@inertiajs/vue3'

createInertiaApp({
    // ...
    defaults: {
        visitOptions: (href, options) => {
            return {
                headers: {
                    ...options.headers,
                    'X-Custom-Header': 'value',
                },
            }
        },
    },
})
```

```jsx React icon="react"
import { createInertiaApp } from '@inertiajs/react'
import { createRoot } from 'react-dom/client'

createInertiaApp({
    // ...
    defaults: {
        visitOptions: (href, options) => {
            return {
                headers: {
                    ...options.headers,
                    'X-Custom-Header': 'value',
                },
            }
        },
    },
})
```

```js Svelte icon="s"
import { createInertiaApp } from '@inertiajs/svelte'

createInertiaApp({
    // ...
    defaults: {
        visitOptions: (href, options) => {
            return {
                headers: {
                    ...options.headers,
                    'X-Custom-Header': 'value',
                },
            }
        },
    },
})
```

</CodeGroup>

## ファイルアップロード

ファイルを含む訪問／リクエストを行う場合、Inertia はリクエストデータを自動的に `FormData` オブジェクトへ変換します。常に `FormData` オブジェクトを使用したい場合は、`forceFormData` オプションを使用できます。

<CodeGroup>

```js Vue icon="vuejs"
import { router } from '@inertiajs/vue3'

router.post('/companies', data, {
    forceFormData: true,
})
```

```js React icon="react"
import { router } from '@inertiajs/react'

router.post('/companies', data, {
    forceFormData: true,
})
```

```js Svelte icon="s"
import { router } from '@inertiajs/svelte'

router.post('/companies', data, {
    forceFormData: true,
})
```

</CodeGroup>

ファイルアップロードの詳細については、専用の [ファイルアップロード](/v2/the-basics/file-uploads) ドキュメントを参照してください。

## ブラウザ履歴

訪問を行うと、Inertia は自動的にブラウザ履歴に新しいエントリを追加します。ただし、`replace` オプションを `true` に設定することで、現在の履歴エントリを置き換えることも可能です。

<CodeGroup>

```js Vue icon="vuejs"
import { router } from '@inertiajs/vue3'

router.get('/users', { search: 'John' }, { replace: true })
```

```js React icon="react"
import { router } from '@inertiajs/react'

router.get('/users', { search: 'John' }, { replace: true })
```

```js Svelte icon="s"
import { router } from '@inertiajs/svelte'

router.get('/users', { search: 'John' }, { replace: true })
```

</CodeGroup>

同じ URL への訪問では、`replace` は自動的に `true` に設定されます。

## クライアントサイド訪問

`router.push` および `router.replace` メソッドを使用して、クライアントサイドのみの訪問を行うことができます。この方法は、サーバーリクエストを行わずにブラウザ履歴を更新したい場合に便利です。

<CodeGroup>

```js Vue icon="vuejs"
import { router } from '@inertiajs/vue3'

router.push({
    url: '/users',
    component: 'Users',
    props: { search: 'John' },
    clearHistory: false,
    encryptHistory: false,
    preserveScroll: false,
    preserveState: false,
    errorBag: null,
    onSuccess: (page) => {},
    onError: (errors) => {},
    onFinish: (visit) => {},
})
```

```js React icon="react"
import { router } from '@inertiajs/react'

router.push({
    url: '/users',
    component: 'Users',
    props: { search: 'John' },
    clearHistory: false,
    encryptHistory: false,
    preserveScroll: false,
    preserveState: false,
    errorBag: null,
    onSuccess: (page) => {},
    onError: (errors) => {},
    onFinish: (visit) => {},
})
```

```js Svelte icon="s"
import { router } from '@inertiajs/svelte'

router.push({
    url: '/users',
    component: 'Users',
    props: { search: 'John' },
    clearHistory: false,
    encryptHistory: false,
    preserveScroll: false,
    preserveState: false,
    errorBag: null,
    onSuccess: (page) => {},
    onError: (errors) => {},
    onFinish: (visit) => {},
})
```

</CodeGroup>

すべてのパラメータは任意です。デフォルトでは、渡されたすべてのパラメータ（`errorBag` を除く）が現在のページとマージされます。つまり、現在のページの URL、コンポーネント、props を上書きする責任はあなたにあります。

現在のページの props にアクセスする必要がある場合は、props オプションに関数を渡すことができます。この関数は現在のページの props を引数として受け取り、新しい props を返す必要があります。

`errorBag` オプションを使用すると、`onError` コールバックでバリデーションエラーを処理する際に使用するエラーバッグを指定できます。

<CodeGroup>

```js Vue icon="vuejs"
import { router } from '@inertiajs/vue3'

router.push({ url: '/users', component: 'Users' })

router.replace({
    props: (currentProps) => ({ ...currentProps, search: 'John' })
})
```

```js React icon="react"
import { router } from '@inertiajs/react'

router.push({ url: '/users', component: 'Users' })

router.replace({
    props: (currentProps) => ({ ...currentProps, search: 'John' })
})
```

```js Svelte icon="s"
import { router } from '@inertiajs/svelte'

router.push({ url: '/users', component: 'Users' })

router.replace({
    props: (currentProps) => ({ ...currentProps, search: 'John' })
})
```

</CodeGroup>

クライアントサイドで push するルートは、必ずサーバー側でも定義されている必要があります。ユーザーがページをリフレッシュした場合、サーバーはそのページをどのようにレンダリングするかを把握している必要があります。

<Warning>
一部のブラウザでは、短時間に許可される `history.pushState()` および `history.replaceState()` の呼び出し回数に制限があります。Inertia はこのエラーをキャッチしてコンソールにログ出力しますが、状態の更新は失われます。`router.push()` や `router.replace()` を頻繁に呼び出すことは避け、高頻度なシナリオではデバウンスやバッチ処理を検討してください。
</Warning>

### Prop ヘルパー

Inertia は、サーバーリクエストを行わずにページの props を更新するための 3 つのヘルパーメソッドを提供しています。これらのメソッドは `router.replace()` のショートカットであり、`preserveScroll` と `preserveState` を自動的に `true` に設定します。

<CodeGroup>

```js Vue icon="vuejs"
import { router } from '@inertiajs/vue3'

// prop の値を置き換える…
router.replaceProp('user.name', 'Jane Smith')

// 配列の prop に追加…
router.appendToProp('messages', { id: 4, text: 'New message' })

// 配列の prop の先頭に追加…
router.prependToProp('tags', 'urgent')
```

```js React icon="react"
import { router } from '@inertiajs/react'

// prop の値を置き換える…
router.replaceProp('user.name', 'Jane Smith')

// 配列の prop に追加…
router.appendToProp('messages', { id: 4, text: 'New message' })

// 配列の prop の先頭に追加…
router.prependToProp('tags', 'urgent')
```

```js Svelte icon="s"
import { router } from '@inertiajs/svelte'

// prop の値を置き換える…
router.replaceProp('user.name', 'Jane Smith')

// 配列の prop に追加…
router.appendToProp('messages', { id: 4, text: 'New message' })

// 配列の prop の先頭に追加…
router.prependToProp('tags', 'urgent')
```

</CodeGroup>

これら 3 つのメソッドはいずれも、ネストされた props に対してドット記法をサポートしており、現在の値を第 1 引数、現在のページの props を第 2 引数として受け取るコールバック関数を指定することもできます。

<CodeGroup>

```js Vue icon="vuejs"
import { router } from '@inertiajs/vue3'

router.prependToProp('notifications', (current, props) => {
    return {
        id: Date.now(),
        message: `Hello ${props.user.name}\
```

```js React icon="react"
import { router } from '@inertiajs/react'

router.prependToProp('notifications', (current, props) => {
    return {
        id: Date.now(),
        message: `Hello ${props.user.name}\
```

```js Svelte icon="s"
import { router } from '@inertiajs/svelte'

router.prependToProp('notifications', (current, props) => {
    return {
        id: Date.now(),
        message: `Hello ${props.user.name}\
```

</CodeGroup>

## 状態の保持

デフォルトでは、同じページへの訪問は新しいページコンポーネントインスタンスを作成します。これにより、フォーム入力、スクロール位置、フォーカス状態などのローカル状態は失われます。

しかし、状況によってはページコンポーネントの状態を保持する必要があります。たとえば、フォームを送信した際に、サーバー側でバリデーションエラーが発生した場合、フォームデータを保持する必要があります。

このため、`post`、`put`、`patch`、`delete`、`reload` メソッドは、デフォルトで `preserveState` オプションを `true` に設定しています。

`get` メソッド使用時にコンポーネントの状態を保持したい場合は、`preserveState` オプションを `true` に設定してください。

<CodeGroup>

```js Vue icon="vuejs"
import { router } from '@inertiajs/vue3'

router.get('/users', { search: 'John' }, { preserveState: true })
```

```js React icon="react"
import { router } from '@inertiajs/react'

router.get('/users', { search: 'John' }, { preserveState: true })
```

```js Svelte icon="s"
import { router } from '@inertiajs/svelte'

router.get('/users', { search: 'John' }, { preserveState: true })
```

</CodeGroup>

レスポンスにバリデーションエラーが含まれている場合のみ状態を保持したい場合は、`preserveState` オプションを `"errors"` に設定してください。

<CodeGroup>

```js Vue icon="vuejs"
import { router } from '@inertiajs/vue3'

router.get('/users', { search: 'John' }, { preserveState: 'errors' })
```

```js React icon="react"
import { router } from '@inertiajs/react'

router.get('/users', { search: 'John' }, { preserveState: 'errors' })
```

```js Svelte icon="s"
import { router } from '@inertiajs/svelte'

router.get('/users', { search: 'John' }, { preserveState: 'errors' })
```

</CodeGroup>

レスポンスに基づいて `preserveState` オプションを遅延評価するために、コールバックを指定することもできます。

<CodeGroup>

```js Vue icon="vuejs"
import { router } from '@inertiajs/vue3'

router.post('/users', data, {
    preserveState: (page) => page.props.someProp === 'value',
})
```

```js React icon="react"
import { router } from '@inertiajs/react'

router.post('/users', data, {
    preserveState: (page) => page.props.someProp === 'value',
})
```

```js Svelte icon="s"
import { router } from '@inertiajs/svelte'

router.post('/users', data, {
    preserveState: (page) => page.props.someProp === 'value',
})
```

</CodeGroup>

## スクロールの保持

ページ間を移動する際、Inertia はデフォルトのブラウザ挙動を模倣し、ドキュメントボディ（および定義された [スクロール領域](/v2/advanced/scroll-management#scroll-regions)）のスクロール位置を自動的にページ上部へリセットします。

この挙動を無効にしたい場合は、`preserveScroll` オプションを `true` に設定してください。

<CodeGroup>

```js Vue icon="vuejs"
import { router } from '@inertiajs/vue3'

router.visit(url, { preserveScroll: true })
```

```js React icon="react"
import { router } from '@inertiajs/react'

router.visit(url, { preserveScroll: true })
```

```js Svelte icon="s"
import { router } from '@inertiajs/svelte'

router.visit(url, { preserveScroll: true })
```

</CodeGroup>

レスポンスにバリデーションエラーが含まれている場合のみスクロール位置を保持したい場合は、`preserveScroll` オプションを `"errors"` に設定してください。

<CodeGroup>

```js Vue icon="vuejs"
import { router } from '@inertiajs/vue3'

router.visit(url, { preserveScroll: 'errors' })
```

```js React icon="react"
import { router } from '@inertiajs/react'

router.visit(url, { preserveScroll: 'errors' })
```

```js Svelte icon="s"
import { router } from '@inertiajs/svelte'

router.visit(url, { preserveScroll: 'errors' })
```

</CodeGroup>

レスポンスに基づいて `preserveScroll` オプションを遅延評価するために、コールバックを指定することもできます。

<CodeGroup>

```js Vue icon="vuejs"
import { router } from '@inertiajs/vue3'

router.post('/users', data, {
    preserveScroll: (page) => page.props.someProp === 'value',
})
```

```js React icon="react"
import { router } from '@inertiajs/react'

router.post('/users', data, {
    preserveScroll: (page) => page.props.someProp === 'value',
})
```

```js Svelte icon="s"
import { router } from '@inertiajs/svelte'

router.post('/users', data, {
    preserveScroll: (page) => page.props.someProp === 'value',
})
```

</CodeGroup>

この機能の詳細については、[スクロール管理](/v2/advanced/scroll-management) ドキュメントを参照してください。

## パーシャルリロード

`only` オプションを使用すると、同じページへの後続の訪問時に、サーバーから props（データ）の一部のみをリクエストできます。これにより、ページが更新を必要としないデータを取得する必要がなくなり、アプリケーションをより効率的にできます。

<CodeGroup>

```js Vue icon="vuejs"
import { router } from '@inertiajs/vue3'

router.get('/users', { search: 'John' }, { only: ['users'] })
```

```js React icon="react"
import { router } from '@inertiajs/react'

router.get('/users', { search: 'John' }, { only: ['users'] })
```

```js Svelte icon="s"
import { router } from '@inertiajs/svelte'

router.get('/users', { search: 'John' }, { only: ['users'] })
```

</CodeGroup>

この機能の詳細については、[パーシャルリロード](/v2/data-props/partial-reloads) ドキュメントを参照してください。

## ビュートランジション

`viewTransition` オプションを `true` に設定することで、訪問時に [ビュートランジション](/v2/the-basics/view-transitions) を有効にできます。これにより、ブラウザの View Transitions API を使用してページ遷移をアニメーション化します。

<CodeGroup>

```js Vue icon="vuejs"
import { router } from '@inertiajs/vue3'

router.visit('/another-page', { viewTransition: true })
```

```js React icon="react"
import { router } from '@inertiajs/react'

router.visit('/another-page', { viewTransition: true })
```

```js Svelte icon="s"
import { router } from '@inertiajs/svelte'

router.visit('/another-page', { viewTransition: true })
```

</CodeGroup>

## 訪問のキャンセル

キャンセルトークンを使用して訪問をキャンセルできます。Inertia は訪問を行う前に、自動的にキャンセルトークンを生成し、`onCancelToken()` コールバックを通じて提供します。

<CodeGroup>

```js Vue icon="vuejs"
import { router } from '@inertiajs/vue3'

router.post('/users', data, {
    onCancelToken: (cancelToken) => (this.cancelToken = cancelToken),
})

// 訪問をキャンセル…
this.cancelToken.cancel()
```

```js React icon="react"
import { router } from '@inertiajs/react'

router.post('/users', data, {
    onCancelToken: (cancelToken) => (this.cancelToken = cancelToken),
})

// 訪問をキャンセル…
this.cancelToken.cancel()
```

```js Svelte icon="s"
import { router } from '@inertiajs/svelte'

router.post('/users', data, {
    onCancelToken: (cancelToken) => (this.cancelToken = cancelToken),
})

// 訪問をキャンセル…
this.cancelToken.cancel()
```

</CodeGroup>

訪問がキャンセルされた場合、`onCancel()` および `onFinish()` イベントコールバックが実行されます。

## イベントコールバック

Inertia の [グローバルイベント](/v2/advanced/events) に加えて、訪問ごとに使用できる複数のイベントコールバックが提供されています。

<CodeGroup>

```js Vue icon="vuejs"
import { router } from '@inertiajs/vue3'

router.post('/users', data, {
    onBefore: (visit) => {},
    onStart: (visit) => {},
    onProgress: (progress) => {},
    onSuccess: (page) => {},
    onError: (errors) => {},
    onCancel: () => {},
    onFinish: visit => {},
    onPrefetching: () => {},
    onPrefetched: () => {},
})
```

```js React icon="react"
import { router } from '@inertiajs/react'

router.post('/users', data, {
    onBefore: (visit) => {},
    onStart: (visit) => {},
    onProgress: (progress) => {},
    onSuccess: (page) => {},
    onError: (errors) => {},
    onCancel: () => {},
    onFinish: visit => {},
    onPrefetching: () => {},
    onPrefetched: () => {},
})
```

```js Svelte icon="s"
import { router } from '@inertiajs/svelte'

router.post('/users', data, {
    onBefore: (visit) => {},
    onStart: (visit) => {},
    onProgress: (progress) => {},
    onSuccess: (page) => {},
    onError: (errors) => {},
    onCancel: () => {},
    onFinish: visit => {},
    onPrefetching: () => {},
    onPrefetched: () => {},
})
```

</CodeGroup>

`onBefore()` コールバックから `false` を返すと、訪問はキャンセルされます。

<CodeGroup>

```js Vue icon="vuejs"
import { router } from '@inertiajs/vue3'

router.delete(`/users/${user.id}\
```

```js React icon="react"
import { router } from '@inertiajs/react'

router.delete(`/users/${user.id}\
```

```js Svelte icon="s"
import { router } from '@inertiajs/svelte'

router.delete(`/users/${user.id}\
```

</CodeGroup>

また、`onSuccess()` および `onError()` コールバックから Promise を返すことも可能です。その場合、Promise が解決されるまで「finish」イベントは遅延されます。

<CodeGroup>

```js Vue icon="vuejs"
import { router } from '@inertiajs/vue3'

router.post(url, {
    onSuccess: () => {
        return Promise.all([
            this.firstTask(),
            this.secondTask()
        ])
    }
    onFinish: visit => {
        // firstTask() と secondTask() が完了するまで呼び出されない
    },
})
```

```js React icon="react"
import { router } from '@inertiajs/react'

router.post(url, {
    onSuccess: () => {
        return Promise.all([
            this.firstTask(),
            this.secondTask()
        ])
    }
    onFinish: visit => {
        // firstTask() と secondTask() が完了するまで呼び出されない
    },
})
```

```js Svelte icon="s"
import { router } from '@inertiajs/svelte'

router.post(url, {
    onSuccess: () => {
        return Promise.all([
            this.firstTask(),
            this.secondTask()
        ])
    }
    onFinish: visit => {
        // firstTask() と secondTask() が完了するまで呼び出されない
    },
})
```

</CodeGroup>
