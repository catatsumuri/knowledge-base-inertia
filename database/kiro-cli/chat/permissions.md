# ツール権限の管理

Kiro がシステム上でアクションを実行するために使用するツールの権限は、`/tools` コマンドで管理できます。これにより、Kiro が実行できる操作を細かく制御できます。

---

## ツールコマンド一覧

| コマンド      | 説明                                    |
| --------- | ------------------------------------- |
| help      | ツールに関するヘルプを表示します。                     |
| trust     | セッション中、特定のツールを信頼します。                  |
| untrust   | ツールをリクエストごとの確認に戻します。                  |
| trust-all | すべてのツールを信頼します（非推奨の `/acceptall` と同等）。 |
| reset     | すべてのツールをデフォルトの権限レベルにリセットします。          |

---

## 現在の権限設定を確認する

すべてのツールの現在の権限設定を確認するには、以下を実行します。

```bash
$ kiro-cli chat
Kiro> /tools
```

このコマンドにより、利用可能なすべてのツールと、それぞれの現在の権限ステータス（**信頼済み** または **リクエストごと**）が一覧表示されます。

---

## ツールの権限状態

ツールの権限には 2 つの状態があります。

### 1. 信頼済み

Kiro は毎回確認を求めることなくツールを使用できます。

### 2. リクエストごと

ツールを使用する前に、毎回ユーザーの確認が必要です。

---

## 特定ツールの信頼設定を変更する

現在のセッションで特定のツールを信頼または非信頼にする例：

```bash
Kiro> /tools trust read
Kiro> /tools untrust shell
```

---

## すべてのツールを信頼する

以下のコマンドで、すべてのツールを一度に信頼できます。

```bash
Kiro> /tools trust-all
```

> ⚠ **警告**
> `/tools trust-all` の使用にはリスクがあります。慎重に利用してください。

---

## 利用可能なネイティブツール

| ツール    | 説明                                 |
| ------ | ---------------------------------- |
| read   | システム上のファイルやディレクトリを読み取ります。          |
| write  | システム上のファイルを作成および変更します。             |
| shell  | システム上で bash コマンドを実行します。            |
| aws    | AWS CLI を呼び出して AWS サービスと連携します。     |
| report | チャットに関する問題を AWS に報告するため、ブラウザを開きます。 |

---

## 権限がないツールを使用する場合

Kiro が明示的な権限を持たないツールを使用しようとすると、実行前に承認を求められます。

ユーザーは以下を選択できます：

* アクションを許可
* アクションを拒否
* セッション中そのツールを信頼

---

## デフォルトの信頼設定

各ツールにはデフォルトの信頼設定があります。

* デフォルトで信頼されているのは **read** のみです。

---

## 権限設定の活用例

| 設定                   | 利用シーン                         |
| -------------------- | ----------------------------- |
| Trust fs_read        | コードベース探索時に確認なしでファイルを読み取らせたい場合 |
| Trust fs_write       | プロジェクト作業中にファイル作成・変更を任せたい場合    |
| Untrust execute_bash | 機密環境で全コマンドを事前確認したい場合          |
| Untrust use_aws      | 本番 AWS リソースの意図しない変更を防ぎたい場合    |

---

## ツール使用時の表示

Kiro がツールを使用する際には、適用されている信頼権限が表示されます。

---

## セッション開始時の権限指定

`kiro-cli` のチャットセッション開始時に、信頼権限をあらかじめ指定することも可能です。

