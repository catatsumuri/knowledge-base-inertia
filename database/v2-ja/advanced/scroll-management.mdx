---
title: スクロール管理
---

## スクロールのリセット

ページ間を移動する際、Inertia はデフォルトのブラウザ挙動を再現し、ドキュメントボディ（および定義した任意の[スクロール領域](#scroll-regions)）のスクロール位置を自動的に先頭へリセットします。

さらに、Inertia は各ページのスクロール位置を追跡し、履歴を前後に移動する際にそのスクロール位置を自動的に復元します。

## スクロールの保持

場合によっては、遷移時のデフォルトのスクロールリセットを防ぎたいことがあります。この挙動は、`preserveScroll` オプションを `true` に設定することで無効化できます。

<CodeGroup>

```js Vue icon="vuejs"
import { router } from '@inertiajs/vue3'

router.visit(url, { preserveScroll: true })
```

```js React icon="react"
import { router } from '@inertiajs/react'

router.visit(url, { preserveScroll: true })
```

```js Svelte icon="s"
import { router } from '@inertiajs/svelte'

router.visit(url, { preserveScroll: true })
```

</CodeGroup>

レスポンスにバリデーションエラーが含まれる場合にのみスクロール位置を保持したい場合は、`preserveScroll` オプションを `"errors"` に設定します。

<CodeGroup>

```js Vue icon="vuejs"
import { router } from '@inertiajs/vue3'

router.visit(url, { preserveScroll: 'errors' })
```

```js React icon="react"
import { router } from '@inertiajs/react'

router.visit(url, { preserveScroll: 'errors' })
```

```js Svelte icon="s"
import { router } from '@inertiajs/svelte'

router.visit(url, { preserveScroll: 'errors' })
```

</CodeGroup>

また、コールバックを渡すことで、レスポンスに基づいて `preserveScroll` オプションを遅延評価することもできます。

<CodeGroup>

```js Vue icon="vuejs"
import { router } from '@inertiajs/vue3'

router.post('/users', data, {
    preserveScroll: (page) => page.props.someProp === 'value',
})
```

```js React icon="react"
import { router } from '@inertiajs/react'

router.post('/users', data, {
    preserveScroll: (page) => page.props.someProp === 'value',
})
```

```js Svelte icon="s"
import { router } from '@inertiajs/svelte'

router.post('/users', data, {
    preserveScroll: (page) => page.props.someProp === 'value',
})
```

</CodeGroup>

[Inertia リンク](/v2/the-basics/links)を使用する場合、`preserveScroll` プロパティを使ってスクロール位置を保持できます。

<CodeGroup>

```vue Vue icon="vuejs"
import { Link } from '@inertiajs/vue3'

<Link href="/" preserve-scroll>Home</Link>
```

```jsx React icon="react"
import { Link } from '@inertiajs/react'

<Link preserveScroll href="/">Home</Link>
```

```svelte Svelte icon="s"
import { inertia, Link } from '@inertiajs/svelte'

<a href="/" use:inertia={{ preserveScroll: true }}>Home</a>

<Link href="/" preserveScroll>Home</Link>
```

</CodeGroup>

## スクロール領域

アプリがドキュメントボディのスクロールを使用せず、代わりに（`overflow` CSS プロパティを使った）スクロール可能な要素を使用している場合、スクロールのリセットは機能しません。

このような場合、`scroll-region` 属性を要素に追加して、どのスクロール可能な要素を Inertia が管理すべきかを指定する必要があります。

```html
<div class="overflow-y-auto" scroll-region="">
    <!-- ページコンテンツ -->
</div>
```

## テキストフラグメント

[テキストフラグメント](https://developer.mozilla.org/en-US/docs/Web/URI/Reference/Fragment/Text_fragments)を使用すると、`#:~:text=term` のような特別な URL 構文で、ページ内の特定のテキストへ直接リンクできます。ただし、ブラウザは JavaScript が実行される前にフラグメントディレクティブを削除するため、テキストフラグメントは、対象のテキストが初期の HTML レスポンスに含まれている場合にのみ機能します。

Inertia ページでテキストフラグメントを使用するには、[サーバーサイドレンダリング](/v2/advanced/server-side-rendering)を有効にしてください。
